<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCJ Brookasil | Portal Oficial - Edi√ß√£o 2026</title>
    
    <meta name="description" content="Portal Oficial do Supremo Conselho Judicial da Rep√∫blica de Brookasil. Den√∫ncias, Transpar√™ncia e Justi√ßa.">
    <meta name="theme-color" content="#009E60">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@300;400;500;600;700&family=Merriweather:ital,wght@0,300;0,700;1,300&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <style>
        /* =======================================================================
        üé® CSS CORE - VARI√ÅVEIS E TEMA INSTITUCIONAL (GAB√ÉO PALETTE)
        =======================================================================
        */
        :root {
            /* Cores da Bandeira do Gab√£o (Identidade SCJ) */
            --color-scj-green: #009E60;   /* Verde Floresta - Base */
            --color-scj-yellow: #FCD116;  /* Amarelo Sol - Destaques */
            --color-scj-blue: #3A75C4;    /* Azul Mar - A√ß√µes */
            
            /* Tons Derivados e Neutros */
            --color-scj-dark: #004d2e;
            --color-text-main: #1a1a1a;
            --color-text-muted: #666666;
            --color-bg-body: #f4f6f9;
            --color-bg-card: #ffffff;
            --color-border: #e0e0e0;
            --color-error: #d32f2f;
            --color-success: #2e7d32;

            /* Tipografia */
            --font-display: 'Cinzel', serif;      /* T√≠tulos Imponentes */
            --font-body: 'Inter', sans-serif;     /* Interface */
            --font-legal: 'Merriweather', serif;  /* Textos Jur√≠dicos */

            /* Efeitos */
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 16px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        /* Tema de Alto Contraste (Acessibilidade) */
        body.high-contrast {
            --color-scj-green: #000000;
            --color-scj-yellow: #FFD700;
            --color-scj-blue: #0000FF;
            --color-text-main: #000000;
            --color-text-muted: #000000;
            --color-bg-body: #FFFFFF;
            --color-bg-card: #FFFFFF;
            --color-border: #000000;
        }

        /* Reset e Base */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        
        html { scroll-behavior: smooth; font-size: 100%; }
        
        body {
            font-family: var(--font-body);
            background-color: var(--color-bg-body);
            color: var(--color-text-main);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: radial-gradient(circle at 10% 20%, rgba(0, 158, 96, 0.05) 0%, transparent 20%),
                              radial-gradient(circle at 90% 80%, rgba(58, 117, 196, 0.05) 0%, transparent 20%);
        }

        /* =======================================================================
        üß© COMPONENTES DE UI
        =======================================================================
        */
        
        /* Bot√µes */
        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            padding: 12px 24px; border: none; border-radius: var(--radius-sm);
            font-weight: 600; cursor: pointer; transition: var(--transition);
            text-transform: uppercase; letter-spacing: 0.5px; font-size: 0.9rem;
        }
        .btn-primary { background: var(--color-scj-blue); color: white; box-shadow: 0 4px 6px rgba(58, 117, 196, 0.2); }
        .btn-primary:hover { background: #2a5a9c; transform: translateY(-2px); }
        .btn-accent { background: var(--color-scj-yellow); color: var(--color-scj-dark); }
        .btn-accent:hover { background: #e6be00; }
        .btn-outline { background: transparent; border: 2px solid var(--color-scj-green); color: var(--color-scj-green); }
        .btn-danger { background: var(--color-error); color: white; }

        /* Cards */
        .card {
            background: var(--color-bg-card);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: 24px;
            margin-bottom: 20px;
            border-top: 4px solid var(--color-scj-green);
            position: relative;
        }

        /* Inputs */
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.9rem; color: var(--color-scj-dark); }
        .form-control {
            width: 100%; padding: 12px; border: 1px solid var(--color-border);
            border-radius: var(--radius-sm); font-family: var(--font-body);
            transition: var(--transition); background: #f9f9f9;
        }
        .form-control:focus { border-color: var(--color-scj-blue); background: #fff; box-shadow: 0 0 0 3px rgba(58, 117, 196, 0.1); }
        textarea.form-control { resize: vertical; min-height: 120px; }

        /* Badges de Status */
        .status-badge {
            padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase;
        }
        .status-recebida { background: #eee; color: #555; }
        .status-analise { background: #fff8e1; color: #f57c00; border: 1px solid #ffe0b2; }
        .status-julgada { background: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9; }
        .status-arquivada { background: #ffebee; color: #c62828; }

        /* Toast Notification */
        #toast-container { position: fixed; bottom: 20px; right: 20px; z-index: 9999; }
        .toast {
            background: white; padding: 15px 20px; border-radius: var(--radius-sm);
            box-shadow: var(--shadow-lg); margin-top: 10px; display: flex; align-items: center; gap: 10px;
            animation: slideIn 0.3s ease-out; border-left: 5px solid var(--color-scj-green);
        }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* =======================================================================
        üèõÔ∏è LAYOUT & ESTRUTURA
        =======================================================================
        */
        
        /* Header */
        header {
            background: white; border-bottom: 5px solid transparent;
            border-image: linear-gradient(to right, var(--color-scj-green) 33%, var(--color-scj-yellow) 33%, var(--color-scj-yellow) 66%, var(--color-scj-blue) 66%) 1;
            position: sticky; top: 0; z-index: 1000; box-shadow: var(--shadow-md);
        }

        .top-bar {
            background: var(--color-scj-dark); color: white; padding: 5px 0; font-size: 0.8rem; text-align: center; letter-spacing: 1px;
        }

        .header-main {
            display: flex; justify-content: space-between; align-items: center; padding: 15px 5%;
            max-width: 1400px; margin: 0 auto;
        }

        .brand-area { display: flex; align-items: center; gap: 15px; }
        
        /* LOGO DO USU√ÅRIO */
        .logo-img { height: 80px; width: auto; object-fit: contain; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)); }
        
        .brand-text h1 { font-family: var(--font-display); font-size: 1.8rem; color: var(--color-scj-dark); line-height: 1.1; }
        .brand-text p { font-size: 0.85rem; color: var(--color-scj-blue); text-transform: uppercase; font-weight: 700; letter-spacing: 2px; }

        /* Navega√ß√£o */
        nav ul { display: flex; list-style: none; gap: 5px; }
        nav a {
            text-decoration: none; color: var(--color-text-main); padding: 10px 15px;
            font-weight: 600; border-radius: var(--radius-sm); transition: var(--transition);
            display: flex; align-items: center; gap: 5px; font-size: 0.9rem;
        }
        nav a:hover, nav a.active { background: rgba(0, 158, 96, 0.1); color: var(--color-scj-green); }
        nav a.active { box-shadow: inset 0 -2px 0 var(--color-scj-green); }

        /* Main Container */
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; min-height: 80vh; }
        .view-section { display: none; animation: fadeIn 0.5s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Footer */
        footer { background: #222; color: #fff; padding: 60px 0 20px; margin-top: 60px; text-align: center; border-top: 10px solid var(--color-scj-yellow); }
        .footer-logo { height: 60px; opacity: 0.8; margin-bottom: 20px; }
        
        /* Acessibilidade Panel */
        .accessibility-bar {
            display: flex; gap: 10px; align-items: center;
        }
        .access-btn {
            background: transparent; border: 1px solid var(--color-border); border-radius: 50%;
            width: 36px; height: 36px; display: flex; justify-content: center; align-items: center;
            cursor: pointer; color: var(--color-text-muted); transition: var(--transition);
        }
        .access-btn:hover { background: var(--color-scj-green); color: white; border-color: var(--color-scj-green); }

        /* =======================================================================
        üìÇ √ÅREAS ESPEC√çFICAS
        =======================================================================
        */
        
        /* Home */
        .hero-banner {
            background: linear-gradient(135deg, var(--color-scj-dark) 0%, #002d1b 100%);
            color: white; padding: 60px 40px; border-radius: var(--radius-lg); text-align: center;
            margin-bottom: 40px; position: relative; overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 77, 46, 0.4);
        }
        .hero-banner::before {
            content: "2026"; position: absolute; font-size: 15rem; opacity: 0.05; font-family: var(--font-display);
            top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none;
        }
        
        /* Den√∫ncia Form */
        .file-drop-area {
            border: 2px dashed var(--color-scj-blue); padding: 30px; text-align: center;
            border-radius: var(--radius-md); background: #f0f7ff; cursor: pointer; transition: var(--transition);
        }
        .file-drop-area:hover { background: #e1efff; }
        
        /* Modal de Login Admin */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
            z-index: 2000; display: none; align-items: center; justify-content: center;
        }
        .modal-box {
            background: white; width: 90%; max-width: 400px; padding: 30px;
            border-radius: var(--radius-md); box-shadow: var(--shadow-lg); text-align: center;
            border-top: 5px solid var(--color-scj-yellow);
        }

        /* Tabela Admin */
        .admin-dashboard { display: grid; grid-template-columns: 250px 1fr; gap: 30px; }
        .admin-sidebar { background: white; padding: 20px; border-radius: var(--radius-md); height: fit-content; box-shadow: var(--shadow-sm); }
        .menu-btn { width: 100%; text-align: left; padding: 12px; border: none; background: transparent; cursor: pointer; border-radius: var(--radius-sm); margin-bottom: 5px; }
        .menu-btn:hover, .menu-btn.active-tab { background: #f0f0f0; color: var(--color-scj-blue); font-weight: bold; }

        /* Mobile */
        @media (max-width: 768px) {
            .header-main { flex-direction: column; gap: 15px; }
            nav ul { flex-wrap: wrap; justify-content: center; }
            .admin-dashboard { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="top-bar">
        REP√öBLICA DE BROOKASIL ‚Äî ORDEM, PROGRESSO E JUSTI√áA CONSTITUCIONAL ‚Äî ANO 2026
    </div>

    <header>
        <div class="header-main">
            <div class="brand-area">
                <img src="1000255548.jpg" alt="Bras√£o do Supremo Conselho Judicial" class="logo-img">
                <div class="brand-text">
                    <h1>SCJ</h1>
                    <p>Supremo Conselho Judicial</p>
                </div>
            </div>

            <div class="accessibility-bar">
                <select id="lang-select" class="form-control" style="width: auto; padding: 5px 10px;" aria-label="Selecionar Idioma">
                    <option value="pt">üáßüá∑ PT</option>
                    <option value="en">üá∫üá∏ EN</option>
                </select>
                <div style="width: 1px; height: 20px; background: #ddd; margin: 0 5px;"></div>
                <button class="access-btn" onclick="AccessSystem.toggleContrast()" title="Alto Contraste"><span class="material-symbols-outlined">contrast</span></button>
                <button class="access-btn" onclick="AccessSystem.changeFont(1)" title="Aumentar Fonte"><span class="material-symbols-outlined">text_increase</span></button>
                <button class="access-btn" onclick="AccessSystem.changeFont(-1)" title="Diminuir Fonte"><span class="material-symbols-outlined">text_decrease</span></button>
                <button class="access-btn" onclick="AccessSystem.readingMode()" title="Modo Leitura"><span class="material-symbols-outlined">chrome_reader_mode</span></button>
            </div>
        </div>

        <nav class="container" style="margin: 10px auto; min-height: auto;">
            <ul>
                <li><a href="#" onclick="Router.go('home')" class="active" data-i18n="menu_home"><span class="material-symbols-outlined">home</span> IN√çCIO</a></li>
                <li><a href="#" onclick="Router.go('denuncia')" data-i18n="menu_denounce"><span class="material-symbols-outlined">gavel</span> DENUNCIAR</a></li>
                <li><a href="#" onclick="Router.go('consulta')" data-i18n="menu_consult"><span class="material-symbols-outlined">search</span> CONSULTA P√öBLICA</a></li>
                <li><a href="#" onclick="Router.go('admin')" data-i18n="menu_admin"><span class="material-symbols-outlined">lock</span> √ÅREA RESTRITA</a></li>
            </ul>
        </nav>
    </header>

    <section class="container" style="margin-top: 10px; margin-bottom: 10px; min-height: auto;">
        <details class="card" style="padding: 15px; border-left: 5px solid var(--color-scj-blue); border-top: none;">
            <summary style="cursor: pointer; font-weight: bold; color: var(--color-scj-blue); display: flex; align-items: center; gap: 10px;">
                <span class="material-symbols-outlined">accessibility_new</span> <span data-i18n="access_guide">Guia de Acessibilidade & Ajuda</span>
            </summary>
            <div style="margin-top: 15px; color: var(--color-text-muted);">
                <p data-i18n="access_text">Este portal segue as diretrizes WCAG 2.1. Utilize os bot√µes no topo para ajustar o contraste e tamanho da fonte. Compat√≠vel com leitores de tela NVDA e JAWS. Todas as imagens possuem texto alternativo.</p>
                <br>
                <ul>
                    <li><strong>Tab:</strong> Navegar entre links.</li>
                    <li><strong>Enter:</strong> Selecionar op√ß√£o.</li>
                </ul>
            </div>
        </details>
    </section>

    <div id="toast-container"></div>

    <main class="container">
        
        <section id="view-home" class="view-section active">
            <div class="hero-banner">
                <h2 style="font-family: var(--font-display); font-size: 2.5rem; margin-bottom: 15px;" data-i18n="hero_title">Justi√ßa, Transpar√™ncia e Constitui√ß√£o</h2>
                <p style="font-size: 1.1rem; max-width: 700px; margin: 0 auto;" data-i18n="hero_subtitle">Bem-vindo ao Portal Oficial do Supremo Conselho Judicial da Rep√∫blica de Brookasil. Exer√ßa sua cidadania.</p>
                <div style="margin-top: 30px;">
                    <button class="btn btn-accent" onclick="Router.go('denuncia')" data-i18n="btn_denounce_now">REGISTRAR DEN√öNCIA</button>
                    <button class="btn btn-outline" style="color: white; border-color: white;" onclick="Router.go('consulta')" data-i18n="btn_consult_now">CONSULTAR PROCESSOS</button>
                </div>
            </div>

            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                <span class="material-symbols-outlined" style="color: var(--color-scj-blue); font-size: 2rem;">campaign</span>
                <h3 style="font-family: var(--font-display); color: var(--color-scj-dark);" data-i18n="section_notes">Notas Oficiais da Presid√™ncia</h3>
            </div>
            
            <div id="notes-feed">
                <div style="text-align: center; padding: 40px; color: #999;">
                    <span class="material-symbols-outlined" style="font-size: 3rem;">hourglass_empty</span>
                    <p>Carregando comunicados oficiais...</p>
                </div>
            </div>
        </section>

        <section id="view-denuncia" class="view-section">
            <div class="card" style="border-top-color: var(--color-error);">
                <h2 style="font-family: var(--font-display); color: var(--color-error); margin-bottom: 10px;" data-i18n="denounce_header">Protocolo de Den√∫ncia Formal</h2>
                <p style="color: var(--color-text-muted); margin-bottom: 20px;" data-i18n="denounce_intro">Preencha os dados abaixo com precis√£o. Falsas comunica√ß√µes de crime s√£o pass√≠veis de puni√ß√£o conforme Art. 340 do C√≥digo Penal de Brookasil.</p>
                
                <form id="form-denuncia">
                    <div class="form-group">
                        <label class="form-label" data-i18n="lbl_denunciante">Seu Nome e Cargo (Identifica√ß√£o Obrigat√≥ria)</label>
                        <input type="text" id="d-nome" class="form-control" required placeholder="Ex: Jo√£o Silva - Advogado Civil">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label class="form-label" data-i18n="lbl_acusado">Denunciado (Nome, Cargo, Partido)</label>
                            <input type="text" id="d-acusado" class="form-control" required placeholder="Ex: Ministro X - Partido Y">
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="lbl_data">Data do Ocorrido</label>
                            <input type="date" id="d-data" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" data-i18n="lbl_tema">Natureza da Infra√ß√£o</label>
                        <select id="d-tema" class="form-control" required>
                            <option value="" disabled selected>Selecione uma categoria...</option>
                            <option value="Abuso de Poder">Abuso de Poder</option>
                            <option value="Descumprimento de Leis">Descumprimento de Leis</option>
                            <option value="Corrup√ß√£o">Corrup√ß√£o Ativa/Passiva</option>
                            <option value="Fake News">Dissemina√ß√£o de Fake News</option>
                            <option value="Ofensas">Ofensas √† Honra</option>
                            <option value="Outros">Outros Crimes Constitucionais</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" data-i18n="lbl_artigos">Artigos Violados (Constitui√ß√£o)</label>
                        <input type="text" id="d-artigos" class="form-control" placeholder="Ex: Artigo 5¬∫, Inciso X...">
                    </div>

                    <div class="form-group">
                        <label class="form-label" data-i18n="lbl_desc">Relato Detalhado dos Fatos</label>
                        <textarea id="d-desc" class="form-control" required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" data-i18n="lbl_prova">Provas Materiais (Imagem/V√≠deo - M√°x 2MB)</label>
                        <div class="file-drop-area" onclick="document.getElementById('d-file').click()">
                            <span class="material-symbols-outlined" style="font-size: 40px; color: var(--color-scj-blue);">cloud_upload</span>
                            <p id="file-feedback">Clique para selecionar arquivo da galeria (Local)</p>
                            <input type="file" id="d-file" style="display: none;" accept="image/*,video/mp4" onchange="App.handleFile(this)">
                        </div>
                    </div>

                    <div class="form-group" style="background: #fff8e1; padding: 15px; border-radius: 4px; border: 1px solid #ffe0b2;">
                        <label style="display: flex; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="d-check" required style="width: 20px; height: 20px;">
                            <span style="font-size: 0.85rem;" data-i18n="term_accept"><strong>TERMO DE RESPONSABILIDADE:</strong> Declaro sob as penas da lei que as informa√ß√µes aqui prestadas s√£o verdadeiras e estou ciente de que den√∫ncias caluniosas resultar√£o em processo judicial contra minha pessoa.</span>
                        </label>
                    </div>

                    <div style="text-align: right;">
                        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px;">
                            <span class="material-symbols-outlined">send</span> <span data-i18n="btn_submit_denounce">ENVIAR DEN√öNCIA AO TRIBUNAL</span>
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <section id="view-consulta" class="view-section">
            <h2 style="font-family: var(--font-display); color: var(--color-scj-dark); margin-bottom: 20px;" data-i18n="consult_title">Consulta P√∫blica Processual</h2>
            
            <div class="card" style="background: var(--color-scj-blue); color: white; border:none;">
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <input type="text" id="search-input" class="form-control" placeholder="Buscar por Nome, ID ou Tema..." style="flex: 2; border: none;">
                    <select id="filter-status" class="form-control" style="flex: 1; border: none;">
                        <option value="all">Todos os Status</option>
                        <option value="Recebida">Recebida</option>
                        <option value="Em an√°lise">Em an√°lise</option>
                        <option value="Julgada">Julgada</option>
                        <option value="Arquivada">Arquivada</option>
                    </select>
                    <button class="btn btn-accent" onclick="PublicController.filter()" style="color: black;"><span class="material-symbols-outlined">filter_list</span> FILTRAR</button>
                </div>
            </div>

            <div id="public-results-container">
                </div>
        </section>

        <section id="view-admin" class="view-section">
            <div id="admin-login-overlay" class="modal-overlay">
                <div class="modal-box">
                    <span class="material-symbols-outlined" style="font-size: 3rem; color: var(--color-scj-dark);">security</span>
                    <h3>Acesso Restrito SCJ</h3>
                    <p style="margin-bottom: 20px; font-size: 0.9rem;">Magistrados e Servidores Autorizados</p>
                    <input type="password" id="admin-pass-input" class="form-control" placeholder="Senha de Acesso" style="text-align: center; margin-bottom: 15px;">
                    <button class="btn btn-primary" onclick="AdminController.login()" style="width: 100%;">ENTRAR NO SISTEMA</button>
                    <button class="btn btn-outline" onclick="Router.go('home')" style="width: 100%; margin-top: 10px; border:none;">Voltar</button>
                </div>
            </div>

            <div id="admin-panel" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="color: var(--color-scj-dark);">Painel Administrativo - SCJ 2026</h2>
                    <button class="btn btn-danger" onclick="AdminController.logout()">SAIR</button>
                </div>

                <div class="admin-dashboard">
                    <aside class="admin-sidebar">
                        <button class="menu-btn active-tab" onclick="AdminController.switchTab('denuncias')">
                            <span class="material-symbols-outlined" style="vertical-align: middle;">inbox</span> Gerenciar Den√∫ncias
                        </button>
                        <button class="menu-btn" onclick="AdminController.switchTab('notas')">
                            <span class="material-symbols-outlined" style="vertical-align: middle;">edit_note</span> Publicar Nota Oficial
                        </button>
                    </aside>

                    <div class="admin-content">
                        <div id="adm-tab-denuncias">
                            <div class="card">
                                <h3>Processos Pendentes</h3>
                                <div id="admin-denuncia-list" style="margin-top: 15px;"></div>
                            </div>
                        </div>

                        <div id="adm-tab-notas" style="display: none;">
                            <div class="card">
                                <h3>Nova Nota Oficial</h3>
                                <form onsubmit="AdminController.postNote(event)">
                                    <div class="form-group">
                                        <label class="form-label">T√≠tulo da Nota</label>
                                        <input type="text" id="note-title" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Autoridade</label>
                                        <select id="note-author" class="form-control" required>
                                            <option value="Presidente do SCJ">Presidente do SCJ</option>
                                            <option value="Vice-Presidente do SCJ">Vice-Presidente do SCJ</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Texto do Comunicado</label>
                                        <textarea id="note-body" class="form-control" rows="8" required></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary">PUBLICAR IMEDIATAMENTE</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <div class="container">
            <img src="1000255548.jpg" alt="Logo SCJ" class="footer-logo">
            <h3 style="font-family: var(--font-display); margin-bottom: 10px;">SUPREMO CONSELHO JUDICIAL</h3>
            <p style="font-size: 0.9rem; color: #aaa;">Rep√∫blica de Brookasil</p>
            <div style="margin: 20px 0; width: 50px; height: 2px; background: var(--color-scj-yellow); display: inline-block;"></div>
            <p style="font-size: 0.8rem; color: #777;">&copy; 2026 SCJ. Todos os direitos reservados. Sistema Desenvolvido com Tecnologia de Ponta.</p>
        </div>
    </footer>

    <script type="module">
        /**
         * SCJ OFFICIAL SYSTEM ENGINE
         * Version: 2.0.26 (New Year Build)
         * Developer: AI Senior Architect
         */

        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getDatabase, ref, push, set, onValue, update } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

        // --- CONFIGURA√á√ÉO FIREBASE (CR√çTICA) ---
        const firebaseConfig = {
            databaseURL: "https://SCJ-brookasil-default-rtdb.firebaseio.com",
            apiKey: "AIzaSyBCJEWox7oMJx-Ct1LMzEbNZwZimBlZ8AA" // Nota: Em prod, usar regras de seguran√ßa no backend
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // --- ESTADO GLOBAL ---
        const State = {
            denuncias: [],
            notas: [],
            tempFileBase64: null,
            lang: 'pt',
            isAdmin: false
        };

        // --- DICION√ÅRIO I18N ---
        const Dictionary = {
            pt: {
                menu_home: "IN√çCIO", menu_denounce: "DENUNCIAR", menu_consult: "CONSULTA P√öBLICA", menu_admin: "√ÅREA RESTRITA",
                hero_title: "Justi√ßa, Transpar√™ncia e Constitui√ß√£o",
                btn_denounce_now: "REGISTRAR DEN√öNCIA", btn_consult_now: "CONSULTAR PROCESSOS",
                lbl_denunciante: "Seu Nome e Cargo (Identifica√ß√£o Obrigat√≥ria)",
                term_accept: "TERMO DE RESPONSABILIDADE: Declaro sob as penas da lei...",
                access_guide: "Guia de Acessibilidade & Ajuda"
            },
            en: {
                menu_home: "HOME", menu_denounce: "REPORT", menu_consult: "PUBLIC SEARCH", menu_admin: "RESTRICTED AREA",
                hero_title: "Justice, Transparency and Constitution",
                btn_denounce_now: "FILE A COMPLAINT", btn_consult_now: "SEARCH CASES",
                lbl_denunciante: "Your Name and Role (Mandatory ID)",
                term_accept: "LIABILITY TERM: I declare under penalty of law...",
                access_guide: "Accessibility Guide & Help"
            }
        };

        // --- SERVI√áO DE UTILIT√ÅRIOS ---
        const Utils = {
            toast: (msg, type = 'info') => {
                const container = document.getElementById('toast-container');
                const div = document.createElement('div');
                div.className = 'toast';
                const icon = type === 'error' ? 'error' : (type === 'success' ? 'check_circle' : 'info');
                div.innerHTML = `<span class="material-symbols-outlined" style="color: ${type==='error'?'var(--color-error)':'var(--color-scj-green)'}">${icon}</span> <span>${msg}</span>`;
                container.appendChild(div);
                setTimeout(() => div.remove(), 4000);
            },
            formatDate: (timestamp) => {
                return new Date(timestamp).toLocaleDateString(State.lang === 'pt' ? 'pt-BR' : 'en-US', {
                    day: '2-digit', month: 'long', year: 'numeric', hour: '2-digit', minute:'2-digit'
                });
            },
            sanitize: (str) => {
                const div = document.createElement('div');
                div.innerText = str;
                return div.innerHTML;
            }
        };

        // --- SERVI√áO DE ACESSIBILIDADE ---
        window.AccessSystem = {
            fontSize: 100,
            toggleContrast: () => document.body.classList.toggle('high-contrast'),
            changeFont: (dir) => {
                AccessSystem.fontSize += (dir * 10);
                if(AccessSystem.fontSize < 80) AccessSystem.fontSize = 80;
                if(AccessSystem.fontSize > 130) AccessSystem.fontSize = 130;
                document.documentElement.style.fontSize = `${AccessSystem.fontSize}%`;
            },
            readingMode: () => {
                document.body.style.maxWidth = "800px";
                document.body.style.margin = "0 auto";
                document.body.style.backgroundImage = "none";
                document.body.style.backgroundColor = "#fff";
                Utils.toast("Modo Leitura Ativado", "info");
            }
        };

        // --- ROTEAMENTO ---
        window.Router = {
            go: (viewId) => {
                document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
                document.getElementById(`view-${viewId}`).classList.add('active');
                
                // Atualiza Menu
                document.querySelectorAll('nav a').forEach(el => el.classList.remove('active'));
                const activeLink = document.querySelector(`a[onclick="Router.go('${viewId}')"]`);
                if(activeLink) activeLink.classList.add('active');

                // L√≥gica Espec√≠fica
                if(viewId === 'admin' && !State.isAdmin) {
                    document.getElementById('admin-login-overlay').style.display = 'flex';
                }
                if(viewId === 'consulta') PublicController.render();
                window.scrollTo(0,0);
            }
        };

        // --- CONTROLADOR PRINCIPAL DA APP ---
        window.App = {
            init: () => {
                App.listenData();
                
                // I18n Listener
                document.getElementById('lang-select').addEventListener('change', (e) => {
                    State.lang = e.target.value;
                    App.translate();
                });

                // Form Submit
                document.getElementById('form-denuncia').addEventListener('submit', App.submitDenuncia);
            },

            listenData: () => {
                // Ouvir Den√∫ncias
                onValue(ref(db, 'denuncias'), (snapshot) => {
                    State.denuncias = [];
                    snapshot.forEach(child => {
                        State.denuncias.push({ id: child.key, ...child.val() });
                    });
                    PublicController.render();
                    if(State.isAdmin) AdminController.renderList();
                });

                // Ouvir Notas
                onValue(ref(db, 'notas_oficiais'), (snapshot) => {
                    State.notas = [];
                    snapshot.forEach(child => {
                        State.notas.unshift(child.val()); // Mais recente primeiro
                    });
                    App.renderNotes();
                });
            },

            handleFile: (input) => {
                const file = input.files[0];
                if (!file) return;
                
                // Limite 2MB (Firebase Realtime tem limites)
                if(file.size > 2 * 1024 * 1024) {
                    Utils.toast("Arquivo muito grande. M√°ximo 2MB.", "error");
                    input.value = "";
                    return;
                }

                const reader = new FileReader();
                reader.onload = (e) => {
                    State.tempFileBase64 = e.target.result;
                    document.getElementById('file-feedback').innerText = `‚úÖ Arquivo Carregado: ${file.name}`;
                    document.getElementById('file-feedback').style.color = "var(--color-scj-green)";
                    document.getElementById('file-feedback').style.fontWeight = "bold";
                };
                reader.readAsDataURL(file);
            },

            submitDenuncia: async (e) => {
                e.preventDefault();
                
                const data = {
                    denunciante: document.getElementById('d-nome').value,
                    acusado: document.getElementById('d-acusado').value,
                    data_ocorrido: document.getElementById('d-data').value,
                    tema: document.getElementById('d-tema').value,
                    artigos: document.getElementById('d-artigos').value,
                    descricao: document.getElementById('d-desc').value,
                    prova: State.tempFileBase64 || "Sem anexo",
                    status: "Recebida",
                    timestamp: Date.now(),
                    decisao_final: ""
                };

                try {
                    await push(ref(db, 'denuncias'), data);
                    Utils.toast("Den√∫ncia Protocolada com Sucesso!", "success");
                    e.target.reset();
                    State.tempFileBase64 = null;
                    document.getElementById('file-feedback').innerText = "Clique para selecionar arquivo";
                    document.getElementById('file-feedback').style.color = "initial";
                    setTimeout(() => Router.go('consulta'), 1000);
                } catch (err) {
                    console.error(err);
                    Utils.toast("Erro ao enviar. Verifique sua conex√£o.", "error");
                }
            },

            renderNotes: () => {
                const container = document.getElementById('notes-feed');
                if(State.notas.length === 0) {
                    container.innerHTML = '<p class="text-center">Nenhuma nota oficial publicada.</p>';
                    return;
                }
                container.innerHTML = State.notas.map(n => `
                    <div class="card" style="border-left: 5px solid var(--color-scj-yellow);">
                        <small style="text-transform:uppercase; color:#999; font-weight:bold;">${Utils.formatDate(n.timestamp)} ‚Ä¢ ${n.autor}</small>
                        <h3 style="color: var(--color-scj-blue); margin: 5px 0 10px;">${n.titulo}</h3>
                        <p style="white-space: pre-wrap;">${n.texto}</p>
                        <div style="margin-top:15px; text-align:right;">
                            <img src="1000255548.jpg" style="height:30px; opacity:0.5; vertical-align:middle;">
                        </div>
                    </div>
                `).join('');
            },

            translate: () => {
                // Implementa√ß√£o simples de troca de texto
                const dict = Dictionary[State.lang];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(dict[key]) el.innerText = dict[key];
                });
            }
        };

        // --- PUBLIC CONTROLLER ---
        window.PublicController = {
            render: () => {
                // Chama o filtro para renderizar com base nos inputs atuais
                PublicController.filter();
            },
            filter: () => {
                const search = document.getElementById('search-input').value.toLowerCase();
                const status = document.getElementById('filter-status').value;
                const container = document.getElementById('public-results-container');

                const filtered = State.denuncias.filter(d => {
                    const matchText = d.acusado.toLowerCase().includes(search) || d.tema.toLowerCase().includes(search) || d.id.includes(search);
                    const matchStatus = status === 'all' || d.status === status;
                    return matchText && matchStatus;
                }).sort((a,b) => b.timestamp - a.timestamp); // Mais recente primeiro

                container.innerHTML = "";

                if(filtered.length === 0) {
                    container.innerHTML = `<div style="text-align:center; padding:30px; color:#999;">Nenhum processo encontrado com os filtros atuais.</div>`;
                    return;
                }

                filtered.forEach(d => {
                    let badge = '';
                    if(d.status === 'Recebida') badge = 'status-recebida';
                    else if(d.status === 'Em an√°lise') badge = 'status-analise';
                    else if(d.status === 'Julgada') badge = 'status-julgada';
                    else badge = 'status-arquivada';

                    // Se julgada, mostra decis√£o
                    const decisaoBlock = d.status === 'Julgada' ? `
                        <div style="margin-top:15px; padding:15px; background:#f1f8e9; border:1px solid #c5e1a5; border-radius:4px;">
                            <strong style="color:var(--color-success);">‚öñÔ∏è DECIS√ÉO FINAL DO SCJ:</strong>
                            <p>${d.decisao_final}</p>
                        </div>
                    ` : '';

                    container.innerHTML += `
                        <div class="card">
                            <div style="display:flex; justify-content:space-between; flex-wrap:wrap;">
                                <h4 style="color:var(--color-scj-blue);">Processo #${d.id.substring(1,8)}</h4>
                                <span class="status-badge ${badge}">${d.status}</span>
                            </div>
                            <h3 style="margin: 5px 0;">Acusado: ${d.acusado}</h3>
                            <p style="font-size:0.9rem; color:#666;">
                                <strong>Tema:</strong> ${d.tema} | <strong>Data:</strong> ${d.data_ocorrido}
                            </p>
                            <hr style="margin:10px 0; border:0; border-top:1px solid #eee;">
                            <p><strong>Descri√ß√£o:</strong> ${d.descricao}</p>
                            ${decisaoBlock}
                        </div>
                    `;
                });
            }
        };

        // --- ADMIN CONTROLLER ---
        window.AdminController = {
            login: () => {
                const pass = document.getElementById('admin-pass-input').value;
                if(pass === "SCJ_ordem2026") {
                    State.isAdmin = true;
                    document.getElementById('admin-login-overlay').style.display = 'none';
                    document.getElementById('admin-panel').style.display = 'block';
                    AdminController.renderList();
                    Utils.toast("Bem-vindo, Excel√™ncia.", "success");
                } else {
                    Utils.toast("Acesso Negado. Senha Incorreta.", "error");
                    document.getElementById('admin-pass-input').value = "";
                }
            },
            logout: () => {
                State.isAdmin = false;
                document.getElementById('admin-panel').style.display = 'none';
                document.getElementById('admin-pass-input').value = "";
                Router.go('home');
            },
            switchTab: (tabName) => {
                document.getElementById('adm-tab-denuncias').style.display = 'none';
                document.getElementById('adm-tab-notas').style.display = 'none';
                document.getElementById(`adm-tab-${tabName}`).style.display = 'block';
                
                // UI Toggle
                document.querySelectorAll('.menu-btn').forEach(btn => btn.classList.remove('active-tab'));
                event.currentTarget.classList.add('active-tab');
            },
            renderList: () => {
                const container = document.getElementById('admin-denuncia-list');
                container.innerHTML = "";
                
                State.denuncias.slice().reverse().forEach(d => {
                    container.innerHTML += `
                        <div style="border:1px solid #eee; padding:15px; margin-bottom:10px; border-radius:4px;">
                            <div style="display:flex; justify-content:space-between;">
                                <strong>${d.acusado} (${d.tema})</strong>
                                <small>${d.status}</small>
                            </div>
                            <p style="font-size:0.85rem; color:#666; margin:5px 0;">Denunciante: ${d.denunciante}</p>
                            
                            ${d.prova && d.prova.length > 50 ? 
                                `<details style="margin:10px 0;"><summary style="cursor:pointer; color:blue;">Ver Prova Anexada</summary><img src="${d.prova}" style="max-width:100%; margin-top:10px;"></details>` 
                                : ''}

                            <div style="margin-top:10px; display:flex; gap:5px;">
                                <button class="btn" style="padding:5px 10px; font-size:0.7rem; background:#eee;" onclick="AdminController.setStatus('${d.id}', 'Em an√°lise')">Analisar</button>
                                <button class="btn" style="padding:5px 10px; font-size:0.7rem; background:#ffcdd2; color:#c62828;" onclick="AdminController.setStatus('${d.id}', 'Arquivada')">Arquivar</button>
                            </div>
                            
                            <div style="margin-top:10px; border-top:1px dashed #ccc; padding-top:10px;">
                                <textarea id="veredito-${d.id}" placeholder="Escrever Senten√ßa/Decis√£o..." class="form-control" style="font-size:0.8rem; min-height:60px;"></textarea>
                                <button class="btn btn-primary" style="margin-top:5px; font-size:0.8rem; width:100%;" onclick="AdminController.judge('${d.id}')">PUBLICAR JULGAMENTO</button>
                            </div>
                        </div>
                    `;
                });
            },
            setStatus: (id, status) => {
                update(ref(db, `denuncias/${id}`), { status: status })
                    .then(() => Utils.toast(`Status alterado para: ${status}`, "success"));
            },
            judge: (id) => {
                const text = document.getElementById(`veredito-${id}`).value;
                if(!text) return Utils.toast("Escreva a decis√£o antes de julgar.", "error");

                update(ref(db, `denuncias/${id}`), { 
                    status: "Julgada",
                    decisao_final: text
                }).then(() => Utils.toast("Julgamento publicado com sucesso!", "success"));
            },
            postNote: async (e) => {
                e.preventDefault();
                const note = {
                    titulo: document.getElementById('note-title').value,
                    autor: document.getElementById('note-author').value,
                    texto: document.getElementById('note-body').value,
                    timestamp: Date.now()
                };
                
                try {
                    await push(ref(db, 'notas_oficiais'), note);
                    Utils.toast("Nota Oficial publicada!", "success");
                    e.target.reset();
                } catch(err) {
                    Utils.toast("Erro ao publicar nota.", "error");
                }
            }
        };

        // --- BOOTSTRAP ---
        App.init();

        // Tornar acess√≠vel globalmente (para os onclicks do HTML)
        window.State = State; 
    </script>
</body>
</html>
